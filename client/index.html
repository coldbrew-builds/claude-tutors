<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Tutors</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Home Screen (tool selection) -->
  <div id="home-screen">
    <div class="home-content">
      <h1>Claude Tutors</h1>
      <p class="subtitle">Choose which software you would like to practice.</p>
      <div class="tool-grid">
        <div class="tool-tile" data-tool="blender">
          <i class="fas fa-cube"></i>
          <span class="tool-name">Blender 3D</span>
          <span class="tool-desc">3D modeling & sculpting</span>
        </div>
        <div class="tool-tile" data-tool="figma">
          <i class="fas fa-vector-square"></i>
          <span class="tool-name">Figma</span>
          <span class="tool-desc">UI/UX design</span>
        </div>
        <div class="tool-tile disabled">
          <i class="fas fa-film"></i>
          <span class="tool-name">Adobe Premiere</span>
          <span class="tool-badge">Coming soon</span>
        </div>
        <div class="tool-tile disabled">
          <i class="fas fa-scissors"></i>
          <span class="tool-name">CapCut</span>
          <span class="tool-badge">Coming soon</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Pre-Session Screen -->
  <div id="landing-screen" class="hidden">
    <button id="back-to-home" class="btn-back"><i class="fas fa-arrow-left"></i> Back</button>
    <div class="landing-content">
      <div class="logo">
        <i id="landing-icon" class="fas fa-cube"></i>
      </div>
      <h1>Claude Tutors</h1>
      <p class="subtitle" id="landing-subtitle">Real-time AI-powered Blender 3D tutoring</p>
      <p class="description" id="landing-description">Get voice-guided lessons, live screen analysis, and step-by-step tutorials for 3D modeling in Blender.</p>
      <button id="start-btn" class="btn-primary">
        <i class="fas fa-play"></i> Start Session
      </button>
    </div>
  </div>

  <!-- Session Screen -->
  <div id="session-screen" class="hidden">
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="top-bar-left">
        <button id="back-to-landing" class="btn-back"><i class="fas fa-arrow-left"></i></button>
        <i class="fas fa-cube"></i>
        <span class="brand">Claude Tutors</span>
      </div>
      <div class="top-bar-center">
        <div id="mic-indicator" class="indicator">
          <canvas id="mic-visualizer" width="32" height="14"></canvas>
          <span class="dot"></span>
          <span class="label">Mic</span>
        </div>
        <div id="screen-indicator" class="indicator inactive">
          <span class="dot"></span>
          <span class="label">Screen</span>
        </div>
      </div>
      <div class="top-bar-right">
        <span id="connection-status" class="status-badge">
          <i class="fas fa-circle"></i> Connected
        </span>
        <div id="screen-preview-container" class="hidden">
          <video id="screen-video" autoplay playsinline muted></video>
        </div>
      </div>
    </div>

    <!-- Screen share reminder -->
    <div id="screen-share-banner" class="banner hidden">
      <i class="fas fa-desktop"></i>
      <span>Share your screen so Claude can see what you're working on</span>
      <button id="share-screen-btn" class="btn-small">Share Screen</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Tutorial Panel (left) -->
      <div id="tutorial-panel" class="panel hidden">
        <div class="panel-header">
          <i class="fas fa-book-open"></i>
          <span id="tutorial-title">Tutorial</span>
        </div>

        <div id="step-list"></div>

        <div id="step-image-container" class="hidden">
          <img id="step-image" alt="Step visual" />
        </div>

        <div id="step-instructions" class="hidden">
          <div class="instructions-header">Instructions</div>
          <div id="step-instructions-text"></div>
        </div>
      </div>

      <!-- Transcript Panel (center) -->
      <div id="transcript-panel" class="panel">
        <div id="transcript" class="transcript-body"></div>
      </div>
    </div>

    <!-- Floating Preview Panel (draggable) -->
    <div id="debug-panel">
      <div class="panel-header">
        <i class="fas fa-eye"></i>
        <span>Preview</span>
      </div>
      <div id="reference-image-container" class="hidden">
        <img id="reference-image" alt="Reference" />
      </div>
      <div id="no-reference-placeholder">
        <i class="fas fa-cube"></i>
        <span>No reference yet</span>
      </div>
      <div id="hotkey-display" class="hidden">
        <div class="hotkey-keys"></div>
        <div class="hotkey-desc"></div>
      </div>
    </div>

    <!-- Tutorial Loader Overlay -->
    <div id="tutorial-loader" class="hidden">
      <div class="loader-content">
        <div class="spinner"></div>
        <p>Generating your tutorial...</p>
        <p class="loader-sub" id="loader-label"></p>
      </div>
    </div>
  </div>

  <!-- Off-screen scratch canvas for frame capture -->
  <canvas id="screen-canvas" style="position:fixed;top:-9999px"></canvas>

  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
